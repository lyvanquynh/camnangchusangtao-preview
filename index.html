<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Album Preview</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  overflow: hidden;
  height: 100%;
  touch-action: none;
  user-select: none;
}

#viewer {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

#slider {
  display: flex;
  height: 100%;
  transition: transform 0.45s cubic-bezier(.4,0,.2,1);
}

.slide {
  min-width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.slide img {
  max-width: 100%;
  max-height: 100%;
  transform-origin: center center;
  transition: transform 0.15s ease-out;
  cursor: grab;
}

.slide img:active {
  cursor: grabbing;
}

.nav {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  font-size: 48px;
  color: white;
  padding: 10px 20px;
  cursor: pointer;
  opacity: 0.7;
  z-index: 10;
}

.nav:hover { opacity: 1 }

#prev { left: 0 }
#next { right: 0 }

#counter {
  position: fixed;
  bottom: 15px;
  right: 20px;
  color: white;
  font-size: 14px;
  opacity: 0.7;
}

#close {
  position: fixed;
  top: 15px;
  right: 20px;
  font-size: 28px;
  color: white;
  cursor: pointer;
  z-index: 10;
  opacity: 0.8;
}
#close:hover { opacity: 1 }
</style>
</head>

<body>

<div id="viewer">
  <div id="slider"></div>
</div>

<div id="prev" class="nav">◀</div>
<div id="next" class="nav">▶</div>
<div id="close">✕</div>
<div id="counter"></div>

<script>
const totalImages = 20
const imageFolder = "images/"
const images = Array.from({length: totalImages}, (_, i) =>
  imageFolder + String(i+1).padStart(2,"0") + ".jpg"
)

const slider = document.getElementById("slider")
const counter = document.getElementById("counter")

let index = 0
let scale = 1
let panX = 0
let panY = 0
let isPanning = false
let startX = 0
let startY = 0

images.forEach(src => {
  const slide = document.createElement("div")
  slide.className = "slide"
  const img = document.createElement("img")
  img.src = src
  slide.appendChild(img)
  slider.appendChild(slide)
})

const slides = document.querySelectorAll(".slide img")

function updateSlider(animate = true) {
  slider.style.transition = animate
    ? "transform 0.45s cubic-bezier(.4,0,.2,1)"
    : "none"
  slider.style.transform = `translateX(${-index * window.innerWidth}px)`
  counter.textContent = `${index+1}/${totalImages}`
  resetTransform()
}

function resetTransform() {
  scale = 1
  panX = panY = 0
  applyTransform()
}

function applyTransform() {
  slides[index].style.transform =
    `translate(${panX}px, ${panY}px) scale(${scale})`
}

document.getElementById("next").onclick = () => {
  if (index < totalImages-1) {
    index++
    updateSlider()
  }
}

document.getElementById("prev").onclick = () => {
  if (index > 0) {
    index--
    updateSlider()
  }
}

document.getElementById("close").onclick = () => {
  window.history.back()
}

document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight") document.getElementById("next").click()
  if (e.key === "ArrowLeft") document.getElementById("prev").click()
})

slides.forEach(img => {

  // ZOOM PC
  img.addEventListener("wheel", e => {
    e.preventDefault()
    const delta = e.deltaY < 0 ? 0.1 : -0.1
    scale = Math.min(Math.max(1, scale + delta), 4)
    applyTransform()
  }, { passive:false })

  // PAN START
  img.addEventListener("mousedown", e => {
    if (scale <= 1) return
    isPanning = true
    startX = e.clientX - panX
    startY = e.clientY - panY
  })

  window.addEventListener("mousemove", e => {
    if (!isPanning) return
    panX = e.clientX - startX
    panY = e.clientY - startY
    applyTransform()
  })

  window.addEventListener("mouseup", () => {
    isPanning = false
  })

  // MOBILE PAN
  let lastTouchX = 0, lastTouchY = 0
  img.addEventListener("touchstart", e => {
    if (e.touches.length === 1 && scale > 1) {
      lastTouchX = e.touches[0].clientX
      lastTouchY = e.touches[0].clientY
    }
  })

  img.addEventListener("touchmove", e => {
    if (e.touches.length === 1 && scale > 1) {
      const dx = e.touches[0].clientX - lastTouchX
      const dy = e.touches[0].clientY - lastTouchY
      panX += dx
      panY += dy
      lastTouchX = e.touches[0].clientX
      lastTouchY = e.touches[0].clientY
      applyTransform()
    }
  })
})

updateSlider(false)
</script>

</body>
</html>
