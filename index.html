<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Album xem trước</title>

<style>
html, body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

/* ===== HEADER ===== */
header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
}
header img {
  height: 32px;
}
header h1 {
  font-size: 18px;
  margin: 0;
}

/* ===== ALBUM ===== */
#album {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 14px;
  padding: 14px;
  overflow-y: auto;
  height: calc(100vh - 60px);
}

.thumb {
  background: #111;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
}
.thumb img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: #000;
}

/* ===== VIEWER ===== */
#viewer {
  position: fixed;
  inset: 0;
  background: #000;
  display: none;
  z-index: 999;
}

#imageWrap {
  width: 100%;
  height: 100%;
  overflow: hidden;
  touch-action: none;
  display: flex;
  align-items: center;
  justify-content: center;
}

#mainImage {
  max-width: 100%;
  max-height: 100%;
  transform-origin: center center;
  transition: transform 0.35s ease;
  user-select: none;
  pointer-events: none;
}

/* ===== CONTROLS ===== */
.btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 40px;
  color: #aaa;
  cursor: pointer;
  user-select: none;
  padding: 10px;
}
#prev { left: 10px; }
#next { right: 10px; }

#close {
  position: absolute;
  top: 12px;
  right: 16px;
  font-size: 28px;
  cursor: pointer;
}

#counter {
  position: absolute;
  bottom: 12px;
  right: 16px;
  font-size: 14px;
  color: #ccc;
}
</style>
</head>

<body>

<header>
  <!-- thay logo.png nếu cần -->
  <img src="logo.png" alt="">
  <h1>Album xem trước</h1>
</header>

<div id="album"></div>

<div id="viewer">
  <div id="close">✕</div>
  <div id="prev" class="btn">◀</div>
  <div id="next" class="btn">▶</div>
  <div id="counter"></div>
  <div id="imageWrap">
    <img id="mainImage">
  </div>
</div>

<script>
const totalImages = 20
const album = document.getElementById('album')
const viewer = document.getElementById('viewer')
const img = document.getElementById('mainImage')
const counter = document.getElementById('counter')

let index = 0
let scale = 1
let x = 0
let y = 0
let dragging = false
let startX = 0
let startY = 0

/* ===== LOAD ALBUM ===== */
for (let i = 1; i <= totalImages; i++) {
  const num = String(i).padStart(2, '0')
  const div = document.createElement('div')
  div.className = 'thumb'
  div.innerHTML = `<img src="images/${num}.jpg">`
  div.onclick = () => openViewer(i - 1)
  album.appendChild(div)
}

/* ===== VIEWER ===== */
function openViewer(i) {
  index = i
  viewer.style.display = 'block'
  document.body.style.overflow = 'hidden'
  resetTransform()
  loadImage()
}

function closeViewer() {
  viewer.style.display = 'none'
  document.body.style.overflow = 'auto'
}

function loadImage() {
  const num = String(index + 1).padStart(2, '0')
  img.src = `images/${num}.jpg`
  counter.textContent = `${index + 1}/${totalImages}`
}

function resetTransform() {
  scale = 1
  x = 0
  y = 0
  updateTransform()
}

function updateTransform() {
  img.style.transform = `translate(${x}px, ${y}px) scale(${scale})`
}

/* ===== NAV ===== */
function next() {
  index = (index + 1) % totalImages
  resetTransform()
  loadImage()
}
function prev() {
  index = (index - 1 + totalImages) % totalImages
  resetTransform()
  loadImage()
}

document.getElementById('next').onclick = next
document.getElementById('prev').onclick = prev
document.getElementById('close').onclick = closeViewer

document.addEventListener('keydown', e => {
  if (viewer.style.display !== 'block') return
  if (e.key === 'ArrowRight') next()
  if (e.key === 'ArrowLeft') prev()
  if (e.key === 'Escape') closeViewer()
})

/* ===== ZOOM PC ===== */
viewer.addEventListener('wheel', e => {
  e.preventDefault()
  scale += e.deltaY < 0 ? 0.1 : -0.1
  scale = Math.min(Math.max(scale, 1), 4)
  updateTransform()
}, { passive: false })

/* ===== PAN PC ===== */
viewer.addEventListener('mousedown', e => {
  if (scale === 1) return
  dragging = true
  startX = e.clientX - x
  startY = e.clientY - y
})

window.addEventListener('mousemove', e => {
  if (!dragging) return
  x = e.clientX - startX
  y = e.clientY - startY
  updateTransform()
})

window.addEventListener('mouseup', () => dragging = false)

/* ===== TOUCH ===== */
let startDist = 0

viewer.addEventListener('touchstart', e => {
  if (e.touches.length === 2) {
    startDist = getDist(e.touches)
  }
  if (e.touches.length === 1 && scale > 1) {
    dragging = true
    startX = e.touches[0].clientX - x
    startY = e.touches[0].clientY - y
  }
})

viewer.addEventListener('touchmove', e => {
  e.preventDefault()
  if (e.touches.length === 2) {
    const dist = getDist(e.touches)
    scale *= dist / startDist
    scale = Math.min(Math.max(scale, 1), 4)
    startDist = dist
    updateTransform()
  }
  if (dragging && e.touches.length === 1) {
    x = e.touches[0].clientX - startX
    y = e.touches[0].clientY - startY
    updateTransform()
  }
}, { passive: false })

viewer.addEventListener('touchend', () => dragging = false)

function getDist(t) {
  return Math.hypot(
    t[0].clientX - t[1].clientX,
    t[0].clientY - t[1].clientY
  )
}
</script>

</body>
</html>
